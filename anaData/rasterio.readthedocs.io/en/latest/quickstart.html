

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python Quickstart &mdash; rasterio  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command Line User Guide" href="cli.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="quickstart.html" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "build_date": "2020-07-08T18:00:58Z", "builder": "sphinx", "canonical_url": "https://rasterio.readthedocs.io/en/latest/", "commit": "3ae51c8e", "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "quickstart", "programming_language": "py", "project": "rasterio", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_rtd_theme", "user_analytics_code": "", "version": "latest"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js" async="async"></script>
<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> rasterio
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="quickstart.html#">Python Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#opening-a-dataset-in-reading-mode">Opening a dataset in reading mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#dataset-attributes">Dataset attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#dataset-georeferencing">Dataset georeferencing</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#reading-raster-data">Reading raster data</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#spatial-indexing">Spatial indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#creating-data">Creating data</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#opening-a-dataset-in-writing-mode">Opening a dataset in writing mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#saving-raster-data">Saving raster data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">Python API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">rasterio</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Python Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/mapbox/rasterio/blob/master/docs/quickstart.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-quickstart">
<h1>Python Quickstart<a class="headerlink" href="quickstart.html#python-quickstart" title="Permalink to this headline">¶</a></h1>
<p>Reading and writing data files is a spatial data programmer’s bread and butter.
This document explains how to use Rasterio to read existing files and to create
new files. Some advanced topics are glossed over to be covered in more detail
elsewhere in Rasterio’s documentation. Only the GeoTIFF format is used here,
but the examples do apply to other raster data formats. It is presumed that
Rasterio has been <a class="reference internal" href="installation.html"><span class="doc">installed</span></a>.</p>
<div class="section" id="opening-a-dataset-in-reading-mode">
<h2>Opening a dataset in reading mode<a class="headerlink" href="quickstart.html#opening-a-dataset-in-reading-mode" title="Permalink to this headline">¶</a></h2>
<p>Consider a GeoTIFF file named <code class="file docutils literal notranslate"><span class="pre">example.tif</span></code> with 16-bit Landsat 8 imagery covering a part
of the United States’s Colorado Plateau <a class="footnote-reference brackets" href="quickstart.html#id2" id="id1">1</a>. Because the imagery is large (70
MB) and has a wide dynamic range it is difficult to display it in a browser.
A rescaled and dynamically squashed version is shown below.</p>
<img alt="_images/example.png" src="_images/example.png" />
<p>Import rasterio to begin.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">rasterio</span>
</pre></div>
</div>
<p>Next, open the file.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;example.tif&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Rasterio’s <a class="reference internal" href="api/rasterio.html#rasterio.open" title="rasterio.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> function takes a path string or path-like object and returns an opened dataset object. The
path may point to a file of any supported raster format. Rasterio will open it
using the proper GDAL format driver. Dataset objects have some of the same
attributes as Python file objects.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;example.tif&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">mode</span>
<span class="go">&#39;r&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">closed</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-attributes">
<h2>Dataset attributes<a class="headerlink" href="quickstart.html#dataset-attributes" title="Permalink to this headline">¶</a></h2>
<p>Properties of the raster data stored in the example GeoTIFF can be accessed through
attributes of the opened dataset object. Dataset objects have bands and this
example has a band count of 1.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span>
<span class="go">1</span>
</pre></div>
</div>
<p>A dataset band is an array of values representing the partial distribution of a
single variable in 2-dimensional (2D) space. All band arrays of a dataset have
the same number of rows and columns. The variable represented by the example
dataset’s sole band is Level-1 digital numbers (DN) for the Landsat 8
Operational Land Imager (OLI) band 4 (wavelengths between 640-670 nanometers).
These values can be scaled to radiance or reflectance values. The array of DN
values is 7731 columns wide and 7871 rows high.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">width</span>
<span class="go">7731</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">height</span>
<span class="go">7871</span>
</pre></div>
</div>
<p>Some dataset attributes expose the properties of all dataset bands via a tuple
of values, one per band. To get a mapping of band indexes to variable data
types, apply a dictionary comprehension to the <code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code> product of a
dataset’s <a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetReader.indexes" title="rasterio.io.DatasetReader.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">indexes</span></code></a> and
<a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetReader.dtypes" title="rasterio.io.DatasetReader.dtypes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dtypes</span></code></a> attributes.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">dtype</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">dtype</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">indexes</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)}</span>
<span class="go">{1: &#39;uint16&#39;}</span>
</pre></div>
</div>
<p>The example file’s sole band contains unsigned 16-bit integer values. The
GeoTIFF format also supports signed integers and floats of different size.</p>
</div>
<div class="section" id="dataset-georeferencing">
<h2>Dataset georeferencing<a class="headerlink" href="quickstart.html#dataset-georeferencing" title="Permalink to this headline">¶</a></h2>
<p>A GIS raster dataset is different from an ordinary image; its elements (or
“pixels”) are mapped to regions on the earth’s surface. Every pixels of a
dataset is contained within a spatial bounding box.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">BoundingBox(left=358485.0, bottom=4028985.0, right=590415.0, top=4265115.0)</span>
</pre></div>
</div>
<p>Our example covers the world from
358485 meters (in this case) to 590415 meters, left to right, and 4028985
meters to 4265115 meters bottom to top. It covers a region 231.93 kilometers
wide by 236.13 kilometers high.</p>
<p>The value of <a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetReader.bounds" title="rasterio.io.DatasetReader.bounds"><code class="xref py py-attr docutils literal notranslate"><span class="pre">bounds</span></code></a> attribute is derived
from a more fundamental attribute: the dataset’s geospatial transform.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">transform</span>
<span class="go">Affine(30.0, 0.0, 358485.0,</span>
<span class="go">       0.0, -30.0, 4265115.0)</span>
</pre></div>
</div>
<p>A dataset’s <a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetReader.transform" title="rasterio.io.DatasetReader.transform"><code class="xref py py-attr docutils literal notranslate"><span class="pre">transform</span></code></a> is an affine
transformation matrix that maps pixel locations in (row, col) coordinates to
(x, y) spatial positions. The product of this matrix and <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">0)</span></code>, the row
and column coordinates of the upper left corner of the dataset, is the spatial
position of the upper left corner.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">transform</span> <span class="o">*</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">(358485.0, 4265115.0)</span>
</pre></div>
</div>
<p>The position of the lower right corner is obtained similarly.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">transform</span> <span class="o">*</span> <span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
<span class="go">(590415.0, 4028985.0)</span>
</pre></div>
</div>
<p>But what do these numbers mean? 4028985 meters from where? These coordinate
values are relative to the origin of the dataset’s coordinate reference system
(CRS).</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">crs</span>
<span class="go">CRS.from_epsg(32612)</span>
</pre></div>
</div>
<p>“EPSG 32612” identifies a particular coordinate reference system: <a class="reference external" href="https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system">UTM</a>
zone 12N.  This system is used for mapping areas in the Northern Hemisphere
between 108 and 114 degrees west. The upper left corner of the example dataset,
<code class="docutils literal notranslate"><span class="pre">(358485.0,</span> <span class="pre">4265115.0)</span></code>, is 141.5 kilometers west of zone 12’s central
meridian (111 degrees west) and 4265 kilometers north of the equator.</p>
<p>Between the <a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetReader.crs" title="rasterio.io.DatasetReader.crs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">crs</span></code></a> attribute and <code class="docutils literal notranslate"><span class="pre">transform</span></code>
the georeferencing of a raster dataset is described and the dataset can
compared to other GIS datasets.</p>
</div>
<div class="section" id="reading-raster-data">
<h2>Reading raster data<a class="headerlink" href="quickstart.html#reading-raster-data" title="Permalink to this headline">¶</a></h2>
<p>Data from a raster band can be accessed by the band’s index number. Following
the GDAL convention, bands are indexed from 1.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">indexes</span>
<span class="go">(1,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">band1</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetReader.read" title="rasterio.io.DatasetReader.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a> method returns a Numpy N-D array.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">band1</span>
<span class="go">array([[0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       ...,</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0]], dtype=uint16)</span>
</pre></div>
</div>
<p>Values from the array can be addressed by their row, column index.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">band1</span><span class="p">[</span><span class="n">dataset</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]</span>
<span class="go">17491</span>
</pre></div>
</div>
</div>
<div class="section" id="spatial-indexing">
<h2>Spatial indexing<a class="headerlink" href="quickstart.html#spatial-indexing" title="Permalink to this headline">¶</a></h2>
<p>Datasets have an <a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetReader.index" title="rasterio.io.DatasetReader.index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">index()</span></code></a> method for getting
the array indices corresponding to points in georeferenced space. To get the
value for the pixel 100 kilometers east and 50 kilometers south of the
dataset’s upper left corner, do the following.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">left</span> <span class="o">+</span> <span class="mi">100000</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="mi">50000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">row</span><span class="p">,</span> <span class="n">col</span>
<span class="go">(1666, 3333)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">band1</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span>
<span class="go">7566</span>
</pre></div>
</div>
<p>To get the spatial coordinates of a pixel, use the dataset’s <a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetReader.xy" title="rasterio.io.DatasetReader.xy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xy()</span></code></a> method.
The coordinates of the center of the image can be computed like this.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">xy</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">(476550.0, 4149150.0)</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-data">
<h2>Creating data<a class="headerlink" href="quickstart.html#creating-data" title="Permalink to this headline">¶</a></h2>
<p>Reading data is only half the story. Using Rasterio dataset objects, arrays of
values can be written to a raster data file and thus shared with other GIS
applications such as QGIS.</p>
<p>As an example, consider an array of floating point values representing, e.g.,
a temperature or pressure anomaly field measured or modeled on a regular grid,
240 columns by 180 rows. The first and last grid points on the horizontal axis
are located at 4.0 degrees west and 4.0 degrees east longitude, the first and
last grid points on the vertical axis are located at 3 degrees south and
3 degrees north latitude.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mi">240</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">X</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">Y</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">X</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">Y</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.5</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span> <span class="o">=</span> <span class="mf">10.0</span> <span class="o">*</span> <span class="p">(</span><span class="n">Z2</span> <span class="o">-</span> <span class="n">Z1</span><span class="p">)</span>
</pre></div>
</div>
<p>The fictional field for this example consists of the difference of two Gaussian
distributions and is represented by the array <code class="docutils literal notranslate"><span class="pre">Z</span></code>. Its contours are shown
below.</p>
<img alt="_images/field.png" src="_images/field.png" />
</div>
<div class="section" id="opening-a-dataset-in-writing-mode">
<h2>Opening a dataset in writing mode<a class="headerlink" href="quickstart.html#opening-a-dataset-in-writing-mode" title="Permalink to this headline">¶</a></h2>
<p>To save this array along with georeferencing information to a new raster data
file, call <a class="reference internal" href="api/rasterio.html#rasterio.open" title="rasterio.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">rasterio.open()</span></code></a> with a path to the new file to be created,
<code class="docutils literal notranslate"><span class="pre">'w'</span></code> to specify writing mode, and several keyword arguments.</p>
<ul class="simple">
<li><p><em>driver</em>: the name of the desired format driver</p></li>
<li><p><em>width</em>: the number of columns of the dataset</p></li>
<li><p><em>height</em>: the number of rows of the dataset</p></li>
<li><p><em>count</em>: a count of the dataset bands</p></li>
<li><p><em>dtype</em>: the data type of the dataset</p></li>
<li><p><em>crs</em>: a coordinate reference system identifier or description</p></li>
<li><p><em>transform</em>: an affine transformation matrix, and</p></li>
<li><p><em>nodata</em>: a “nodata” value</p></li>
</ul>
<p>The first 5 of these keyword arguments parametrize fixed, format-specific
properties of the data file and are required when opening a file to
write. The last 3 are optional.</p>
<p>In this example the coordinate reference system will be <code class="docutils literal notranslate"><span class="pre">'+proj=latlong'</span></code>, which
describes an equirectangular coordinate reference system with units of decimal
degrees. The proper affine transformation matrix can be computed from the matrix
product of a translation and a scaling.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rasterio.transform</span> <span class="kn">import</span> <span class="n">Affine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mf">240.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transform</span> <span class="o">=</span> <span class="n">Affine</span><span class="o">.</span><span class="n">translation</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">res</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">res</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">Affine</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transform</span>
<span class="go">Affine(0.033333333333333333, 0.0, -4.0166666666666666,</span>
<span class="go">       0.0, 0.033333333333333333, -3.0166666666666666)</span>
</pre></div>
</div>
<p>The upper left point in the example grid is at 3 degrees west and 2 degrees
north. The raster pixel centered on this grid point extends <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">/</span> <span class="pre">2</span></code>, or
1/60 degrees, in each direction, hence the shift in the expression above.</p>
<p>A dataset for storing the example grid is opened like so</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dataset</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;/tmp/new.tif&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;w&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">height</span><span class="o">=</span><span class="n">Z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">width</span><span class="o">=</span><span class="n">Z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dtype</span><span class="o">=</span><span class="n">Z</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;+proj=latlong&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Values for the <em>height</em>, <em>width</em>, and <em>dtype</em> keyword arguments are taken
directly from attributes of the 2-D array, <code class="docutils literal notranslate"><span class="pre">Z</span></code>. Not all raster formats can
support the 64-bit float values in <code class="docutils literal notranslate"><span class="pre">Z</span></code>, but the GeoTIFF format can.</p>
</div>
<div class="section" id="saving-raster-data">
<h2>Saving raster data<a class="headerlink" href="quickstart.html#saving-raster-data" title="Permalink to this headline">¶</a></h2>
<p>To copy the grid to the opened dataset, call the new dataset’s
<a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetWriter.write" title="rasterio.io.DatasetWriter.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code></a> method with the grid and target band
number as arguments.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dataset</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Then call the <a class="reference internal" href="api/rasterio.io.html#rasterio.io.DatasetWriter.close" title="rasterio.io.DatasetWriter.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> method to sync data to
disk and finish.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dataset</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Because Rasterio’s dataset objects mimic Python’s file objects and implement
Python’s context manager protocol, it is possible to do the following instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
    <span class="s1">&#39;/tmp/new.tif&#39;</span><span class="p">,</span>
    <span class="s1">&#39;w&#39;</span><span class="p">,</span>
    <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">Z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">width</span><span class="o">=</span><span class="n">Z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="n">Z</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;+proj=latlong&#39;</span><span class="p">,</span>
    <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">,</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">dst</span><span class="p">:</span>
    <span class="n">dst</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>These are the basics of reading and writing raster data files. More features
and examples are contained in the <a class="reference external" href="topics.html">advanced topics</a> section.</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="quickstart.html#id1">1</a></span></dt>
<dd><p>“example.tif” is an alias for band 4 of Landsat scene
LC80370342016194LGN00.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli.html" class="btn btn-neutral float-right" title="Command Line User Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Mapbox
      
        <span class="commit">
          Revision <code>3ae51c8e</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="index.html">latest</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/en/stable/">stable</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/htmlzip/">html</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/epub/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="https://readthedocs.org/projects/rasterio/?fromdocs=rasterio">Project Home</a>
          </dd>
          <dd>
            <a href="https://readthedocs.org/builds/rasterio/?fromdocs=rasterio">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>
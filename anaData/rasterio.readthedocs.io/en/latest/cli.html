

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command Line User Guide &mdash; rasterio  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced Topics" href="topics/index.html" />
    <link rel="prev" title="Python Quickstart" href="quickstart.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="cli.html" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "build_date": "2020-07-08T18:00:58Z", "builder": "sphinx", "canonical_url": "https://rasterio.readthedocs.io/en/latest/", "commit": "3ae51c8e", "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "cli", "programming_language": "py", "project": "rasterio", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_rtd_theme", "user_analytics_code": "", "version": "latest"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js" async="async"></script>
<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> rasterio
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Python Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="cli.html#">Command Line User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli.html#creation-options">creation options</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#bounds">bounds</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#calc">calc</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#clip">clip</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#convert">convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#edit-info">edit-info</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#info">info</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#insp">insp</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#mask">mask</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#merge">merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#overview">overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#rasterize">rasterize</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#rm">rm</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#sample">sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#shapes">shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#stack">stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#transform">transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#warp">warp</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#rio-plugins">Rio Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#other-commands">Other commands?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="topics/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">Python API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">rasterio</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Command Line User Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/mapbox/rasterio/blob/master/docs/cli.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="command-line-user-guide">
<h1>Command Line User Guide<a class="headerlink" href="cli.html#command-line-user-guide" title="Permalink to this headline">¶</a></h1>
<p>Rasterio’s command line interface (CLI) is a program named “rio” <a class="footnote-reference brackets" href="cli.html#id3" id="id1">1</a>.</p>
<p>The CLI allows you to build workflows using shell commands, either
interactively at the command prompt or with a script. Many common
cases are covered by CLI sub-commands and it is often more convenient
to use a ready-made command as opposed to implementing similar functionality
as a python script.</p>
<p>The rio program is developed using the <a class="reference external" href="http://click.palletsprojects.com/">Click</a>
framework.  Its plugin system allows external modules to share a common
namespace and handling of context variables.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio --help                                                                                                                         ⏎
<span class="go">Usage: rio [OPTIONS] COMMAND [ARGS]...</span>

<span class="go">  Rasterio command line interface.</span>

<span class="go">Options:</span>
<span class="go">  -v, --verbose           Increase verbosity.</span>
<span class="go">  -q, --quiet             Decrease verbosity.</span>
<span class="go">  --aws-profile TEXT      Select a profile from the AWS credentials file</span>
<span class="go">  --aws-no-sign-requests  Make requests anonymously</span>
<span class="go">  --aws-requester-pays    Requester pays data transfer costs</span>
<span class="go">  --version               Show the version and exit.</span>
<span class="go">  --gdal-version</span>
<span class="go">  --help                  Show this message and exit.</span>

<span class="go">Commands:</span>
<span class="go">  blocks     Write dataset blocks as GeoJSON features.</span>
<span class="go">  bounds     Write bounding boxes to stdout as GeoJSON.</span>
<span class="go">  calc       Raster data calculator.</span>
<span class="go">  clip       Clip a raster to given bounds.</span>
<span class="go">  convert    Copy and convert raster dataset.</span>
<span class="go">  edit-info  Edit dataset metadata.</span>
<span class="go">  env        Print information about the Rasterio environment.</span>
<span class="go">  gcps       Print ground control points as GeoJSON.</span>
<span class="go">  info       Print information about a data file.</span>
<span class="go">  insp       Open a data file and start an interpreter.</span>
<span class="go">  mask       Mask in raster using features.</span>
<span class="go">  merge      Merge a stack of raster datasets.</span>
<span class="go">  overview   Construct overviews in an existing dataset.</span>
<span class="go">  rasterize  Rasterize features.</span>
<span class="go">  rm         Delete a dataset.</span>
<span class="go">  sample     Sample a dataset.</span>
<span class="go">  shapes     Write shapes extracted from bands or masks.</span>
<span class="go">  stack      Stack a number of bands into a multiband dataset.</span>
<span class="go">  transform  Transform coordinates.</span>
<span class="go">  warp       Warp a raster dataset.</span>
</pre></div>
</div>
<p>Commands are shown below. See <code class="docutils literal notranslate"><span class="pre">--help</span></code> of individual commands for more
details.</p>
<div class="section" id="creation-options">
<h2>creation options<a class="headerlink" href="cli.html#creation-options" title="Permalink to this headline">¶</a></h2>
<p>For commands that create new datasets, format specific creation options may
also be passed using <code class="docutils literal notranslate"><span class="pre">--co</span></code>. For example, to tile a new GeoTIFF output file,
add the following.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">--co tiled=true --co blockxsize=256 --co blockysize=256</span>
</pre></div>
</div>
<p>To compress it using the LZW method, add</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">--co compress=LZW</span>
</pre></div>
</div>
</div>
<div class="section" id="bounds">
<h2>bounds<a class="headerlink" href="cli.html#bounds" title="Permalink to this headline">¶</a></h2>
<p>Added in 0.10.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">bounds</span></code> command writes the bounding boxes of raster datasets to GeoJSON for
use with, e.g., <a class="reference external" href="https://github.com/mapbox/geojsonio-cli">geojsonio-cli</a>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio bounds tests/data/RGB.byte.tif --indent <span class="m">2</span>
<span class="go">{</span>
<span class="go">  &quot;features&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;geometry&quot;: {</span>
<span class="go">        &quot;coordinates&quot;: [</span>
<span class="go">          [</span>
<span class="go">            [</span>
<span class="go">              -78.898133,</span>
<span class="go">              23.564991</span>
<span class="go">            ],</span>
<span class="go">            [</span>
<span class="go">              -76.599438,</span>
<span class="go">              23.564991</span>
<span class="go">            ],</span>
<span class="go">            [</span>
<span class="go">              -76.599438,</span>
<span class="go">              25.550874</span>
<span class="go">            ],</span>
<span class="go">            [</span>
<span class="go">              -78.898133,</span>
<span class="go">              25.550874</span>
<span class="go">            ],</span>
<span class="go">            [</span>
<span class="go">              -78.898133,</span>
<span class="go">              23.564991</span>
<span class="go">            ]</span>
<span class="go">          ]</span>
<span class="go">        ],</span>
<span class="go">        &quot;type&quot;: &quot;Polygon&quot;</span>
<span class="go">      },</span>
<span class="go">      &quot;properties&quot;: {</span>
<span class="go">        &quot;id&quot;: &quot;0&quot;,</span>
<span class="go">        &quot;title&quot;: &quot;tests/data/RGB.byte.tif&quot;</span>
<span class="go">      },</span>
<span class="go">      &quot;type&quot;: &quot;Feature&quot;</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;type&quot;: &quot;FeatureCollection&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Shoot the GeoJSON into a Leaflet map using geojsonio-cli by typing
<code class="docutils literal notranslate"><span class="pre">rio</span> <span class="pre">bounds</span> <span class="pre">tests/data/RGB.byte.tif</span> <span class="pre">|</span> <span class="pre">geojsonio</span></code>.</p>
</div>
<div class="section" id="calc">
<h2>calc<a class="headerlink" href="cli.html#calc" title="Permalink to this headline">¶</a></h2>
<p>Added in 0.19</p>
<p>The <code class="docutils literal notranslate"><span class="pre">calc</span></code> command reads files as arrays, evaluates lisp-like expressions in
their context, and writes the result as a new file. Members of the numpy
module and arithmetic and logical operators are available builtin functions
and operators. It is intended for simple calculations; any calculations
requiring multiple steps is better done in Python using the Rasterio and Numpy
APIs.</p>
<p>Input files may have different numbers of bands but should have the same
number of rows and columns. The output file will have the same number of rows
and columns as the inputs and one band per element of the expression result.
An expression involving arithmetic operations on N-D arrays will produce a
N-D array and result in an N-band output file.</p>
<p>The following produces a 3-band GeoTIFF with all values scaled by 0.95 and
incremented by 2. In the expression, <code class="docutils literal notranslate"><span class="pre">(read</span> <span class="pre">1)</span></code> evaluates to the first
input dataset (3 bands) as a 3-D array.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio calc <span class="s2">&quot;(+ 2 (* 0.95 (read 1)))&quot;</span> tests/data/RGB.byte.tif /tmp/out.tif
</pre></div>
</div>
<p>The following produces a 3-band GeoTIFF in which the first band is copied from
the first band of the input and the next two bands are scaled (down) by the
ratio of the first band’s mean to their own means. The <code class="docutils literal notranslate"><span class="pre">--name</span></code> option is
used to bind datasets to a name within the expression. <code class="docutils literal notranslate"><span class="pre">(take</span> <span class="pre">a</span> <span class="pre">1)</span></code> gets the
first band of the dataset named <code class="docutils literal notranslate"><span class="pre">a</span></code> as a 2-D array and <code class="docutils literal notranslate"><span class="pre">(asarray</span> <span class="pre">...)</span></code>
collects a sequence of 2-D arrays into a 3-D array for output.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio calc <span class="s2">&quot;(asarray (take a 1) (* (take a 2) (/ (mean (take a 1)) (mean (take a 2)))) (* (take a 3) (/ (mean (take a 1)) (mean (take a 3)))))&quot;</span> <span class="se">\</span>
&gt; --name <span class="nv">a</span><span class="o">=</span>tests/data/RGB.byte.tif /tmp/out.rgb.tif
</pre></div>
</div>
<p>The command above is also an example of a calculation that is far beyond the
design of the calc command and something that could be done much more
efficiently in Python.</p>
</div>
<div class="section" id="clip">
<h2>clip<a class="headerlink" href="cli.html#clip" title="Permalink to this headline">¶</a></h2>
<p>Added in 0.27</p>
<p>The <code class="docutils literal notranslate"><span class="pre">clip</span></code> command clips a raster using bounds input directly or from a
template raster.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio clip input.tif output.tif --bounds xmin ymin xmax ymax
<span class="gp">$</span> rio clip input.tif output.tif --like template.tif
</pre></div>
</div>
<p>If using <code class="docutils literal notranslate"><span class="pre">--bounds</span></code>, values must be in coordinate reference system of input.
If using <code class="docutils literal notranslate"><span class="pre">--like</span></code>, bounds will automatically be transformed to match the
coordinate reference system of the input.</p>
<p>It can also be combined to read bounds of a feature dataset using Fiona:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio clip input.tif output.tif --bounds <span class="k">$(</span>fio info features.shp --bounds<span class="k">)</span>
</pre></div>
</div>
</div>
<div class="section" id="convert">
<h2>convert<a class="headerlink" href="cli.html#convert" title="Permalink to this headline">¶</a></h2>
<p>Added in 0.25</p>
<p>The <code class="docutils literal notranslate"><span class="pre">convert</span></code> command copies and converts raster datasets to other data types
and formats (similar to <code class="docutils literal notranslate"><span class="pre">gdal_translate</span></code>).</p>
<p>Data values may be linearly scaled when copying by using the <code class="docutils literal notranslate"><span class="pre">--scale-ratio</span></code>
and <code class="docutils literal notranslate"><span class="pre">--scale-offset</span></code> options. Destination raster values are calculated as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dst</span> <span class="o">=</span> <span class="n">scale_ratio</span> <span class="o">*</span> <span class="n">src</span> <span class="o">+</span> <span class="n">scale_offset</span>
</pre></div>
</div>
<p>For example, to scale uint16 data with an actual range of 0-4095 to 0-255
as uint8:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio convert in16.tif out8.tif --dtype uint8 --scale-ratio <span class="m">0</span>.0625
</pre></div>
</div>
<p>You can use <cite>–rgb</cite> as shorthand for <cite>–co photometric=rgb</cite>.</p>
</div>
<div class="section" id="edit-info">
<h2>edit-info<a class="headerlink" href="cli.html#edit-info" title="Permalink to this headline">¶</a></h2>
<p>Added in 0.24</p>
<p>The <code class="docutils literal notranslate"><span class="pre">edit-info</span></code> command allows you edit a raster dataset’s metadata, namely</p>
<ul class="simple">
<li><p>coordinate reference system</p></li>
<li><p>affine transformation matrix</p></li>
<li><p>nodata value</p></li>
<li><p>tags</p></li>
<li><p>color interpretation</p></li>
</ul>
<p>A TIFF created by spatially-unaware image processing software like Photoshop
or Imagemagick can be turned into a GeoTIFF by editing these metadata items.</p>
<p>For example, you can set or change a dataset’s coordinate reference system to
Web Mercator (EPSG:3857),</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio edit-info --crs EPSG:3857 example.tif
</pre></div>
</div>
<p>set its <a class="reference internal" href="topics/georeferencing.html#coordinate-transformation"><span class="std std-ref">affine transformation matrix</span></a>,</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio edit-info --transform <span class="s2">&quot;[300.0, 0.0, 101985.0, 0.0, -300.0, 2826915.0]&quot;</span> example.tif
</pre></div>
</div>
<p>or set its nodata value to, e.g., <cite>0</cite>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio edit-info --nodata <span class="m">0</span> example.tif
</pre></div>
</div>
<p>or set its color interpretation to red, green, blue, and alpha:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio edit-info --colorinterp <span class="nv">1</span><span class="o">=</span>red,2<span class="o">=</span>green,3<span class="o">=</span>blue,4<span class="o">=</span>alpha example.tif
</pre></div>
</div>
<p>which can also be expressed as:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio edit-info --colorinterp RGBA example.tif
</pre></div>
</div>
<p>See <a class="reference internal" href="api/rasterio.enums.html#rasterio.enums.ColorInterp" title="rasterio.enums.ColorInterp"><code class="xref py py-class docutils literal notranslate"><span class="pre">rasterio.enums.ColorInterp</span></code></a> for a full list of supported color
interpretations and the color docs for more information.</p>
</div>
<div class="section" id="info">
<h2>info<a class="headerlink" href="cli.html#info" title="Permalink to this headline">¶</a></h2>
<p>Added in 0.13</p>
<p>The <code class="docutils literal notranslate"><span class="pre">info</span></code> command prints structured information about a dataset.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio info tests/data/RGB.byte.tif --indent <span class="m">2</span>
<span class="go">{</span>
<span class="go">  &quot;count&quot;: 3,</span>
<span class="go">  &quot;crs&quot;: &quot;EPSG:32618&quot;,</span>
<span class="go">  &quot;dtype&quot;: &quot;uint8&quot;,</span>
<span class="go">  &quot;driver&quot;: &quot;GTiff&quot;,</span>
<span class="go">  &quot;bounds&quot;: [</span>
<span class="go">    101985.0,</span>
<span class="go">    2611485.0,</span>
<span class="go">    339315.0,</span>
<span class="go">    2826915.0</span>
<span class="go">  ],</span>
<span class="go">  &quot;lnglat&quot;: [</span>
<span class="go">    -77.75790625255473,</span>
<span class="go">    24.561583285327067</span>
<span class="go">  ],</span>
<span class="go">  &quot;height&quot;: 718,</span>
<span class="go">  &quot;width&quot;: 791,</span>
<span class="go">  &quot;shape&quot;: [</span>
<span class="go">    718,</span>
<span class="go">    791</span>
<span class="go">  ],</span>
<span class="go">  &quot;res&quot;: [</span>
<span class="go">    300.0379266750948,</span>
<span class="go">    300.041782729805</span>
<span class="go">  ],</span>
<span class="go">  &quot;nodata&quot;: 0.0</span>
<span class="go">}</span>
</pre></div>
</div>
<p>More information, such as band statistics, can be had using the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code>
option.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio info tests/data/RGB.byte.tif --indent <span class="m">2</span> --verbose
<span class="go">{</span>
<span class="go">  &quot;count&quot;: 3,</span>
<span class="go">  &quot;crs&quot;: &quot;EPSG:32618&quot;,</span>
<span class="go">  &quot;stats&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;max&quot;: 255.0,</span>
<span class="go">      &quot;mean&quot;: 44.434478650699106,</span>
<span class="go">      &quot;min&quot;: 1.0</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &quot;max&quot;: 255.0,</span>
<span class="go">      &quot;mean&quot;: 66.02203484105824,</span>
<span class="go">      &quot;min&quot;: 1.0</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &quot;max&quot;: 255.0,</span>
<span class="go">      &quot;mean&quot;: 71.39316199120559,</span>
<span class="go">      &quot;min&quot;: 1.0</span>
<span class="go">    }</span>
<span class="go">  ],</span>
<span class="go">  &quot;dtype&quot;: &quot;uint8&quot;,</span>
<span class="go">  &quot;driver&quot;: &quot;GTiff&quot;,</span>
<span class="go">  &quot;bounds&quot;: [</span>
<span class="go">    101985.0,</span>
<span class="go">    2611485.0,</span>
<span class="go">    339315.0,</span>
<span class="go">    2826915.0</span>
<span class="go">  ],</span>
<span class="go">  &quot;lnglat&quot;: [</span>
<span class="go">    -77.75790625255473,</span>
<span class="go">    24.561583285327067</span>
<span class="go">  ],</span>
<span class="go">  &quot;height&quot;: 718,</span>
<span class="go">  &quot;width&quot;: 791,</span>
<span class="go">  &quot;shape&quot;: [</span>
<span class="go">    718,</span>
<span class="go">    791</span>
<span class="go">  ],</span>
<span class="go">  &quot;res&quot;: [</span>
<span class="go">    300.0379266750948,</span>
<span class="go">    300.041782729805</span>
<span class="go">  ],</span>
<span class="go">  &quot;nodata&quot;: 0.0</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="insp">
<h2>insp<a class="headerlink" href="cli.html#insp" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">insp</span></code> command opens a dataset and an interpreter.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio insp --ipython tests/data/RGB.byte.tif
<span class="go">Rasterio 0.32.0 Interactive Inspector (Python 2.7.10)</span>
<span class="go">Type &quot;src.meta&quot;, &quot;src.read(1)&quot;, or &quot;help(src)&quot; for more information.</span>
<span class="go">In [1]: print(src.name)</span>
<span class="go">/path/rasterio/tests/data/RGB.byte.tif</span>

<span class="go">In [2]: print(src.bounds)</span>
<span class="go">BoundingBox(left=101985.0, bottom=2611485.0, right=339315.0, top=2826915.0)</span>
</pre></div>
</div>
</div>
<div class="section" id="mask">
<h2>mask<a class="headerlink" href="cli.html#mask" title="Permalink to this headline">¶</a></h2>
<p>Added in 0.21</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mask</span></code> command masks in pixels from all bands of a raster using features
(masking out all areas not covered by features) and optionally crops the output
raster to the extent of the features.  Features are assumed to be in the same
coordinate reference system as the input raster.</p>
<p>A common use case is masking in raster data by political or other boundaries.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio mask input.tif output.tif --geojson-mask input.geojson
</pre></div>
</div>
<p>GeoJSON features may be provided using stdin or specified directly as first
argument, and output can be cropped to the extent of the features.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio mask input.tif output.tif --crop --geojson-mask - &lt; input.geojson
</pre></div>
</div>
<p>The feature mask can be inverted to mask out pixels covered by features and
keep pixels not covered by features.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio mask input.tif output.tif --invert --geojson-mask input.geojson
</pre></div>
</div>
</div>
<div class="section" id="merge">
<h2>merge<a class="headerlink" href="cli.html#merge" title="Permalink to this headline">¶</a></h2>
<p>Added in 0.12.1</p>
<p>The <code class="docutils literal notranslate"><span class="pre">merge</span></code> command can be used to flatten a stack of identically structured
datasets.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio merge rasterio/tests/data/R*.tif merged.tif
</pre></div>
</div>
</div>
<div class="section" id="overview">
<h2>overview<a class="headerlink" href="cli.html#overview" title="Permalink to this headline">¶</a></h2>
<p>New in 0.25</p>
<p>The <code class="docutils literal notranslate"><span class="pre">overview</span></code> command creates overviews stored in the dataset, which can
improve performance in some applications.</p>
<p>The decimation levels at which to build overviews can be specified as a
comma separated list</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio overview --build <span class="m">2</span>,4,8,16
</pre></div>
</div>
<p>or a base and range of exponents.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio overview --build <span class="m">2</span>^1..4
</pre></div>
</div>
<p>Note that overviews can not currently be removed and are not automatically
updated when the dataset’s primary bands are modified.</p>
<p>Information about existing overviews can be printed using the –ls option.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio overview --ls
</pre></div>
</div>
<p>The block size (tile width and height) used for overviews (internal
or external) can be specified by setting the <code class="docutils literal notranslate"><span class="pre">GDAL_TIFF_OVR_BLOCKSIZE</span></code>
environment variable to a power-of-two value between 64 and 4096. The
default value is 128.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">GDAL_TIFF_OVR_BLOCKSIZE</span><span class="o">=</span><span class="m">256</span> rio overview --build <span class="m">2</span>^1..4
</pre></div>
</div>
</div>
<div class="section" id="rasterize">
<h2>rasterize<a class="headerlink" href="cli.html#rasterize" title="Permalink to this headline">¶</a></h2>
<p>New in 0.18.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rasterize</span></code> command rasterizes GeoJSON features into a new or existing
raster.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio rasterize test.tif --res <span class="m">0</span>.0167 &lt; input.geojson
</pre></div>
</div>
<p>The resulting file will have an upper left coordinate determined by the bounds
of the GeoJSON (in EPSG:4326, which is the default), with a
pixel size of approximately 30 arc seconds.  Pixels whose center is within the
polygon or that are selected by Bresenham’s line algorithm will be burned in
with a default value of 1.</p>
<p>It is possible to rasterize into an existing raster and use an alternative
default value:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio rasterize existing.tif --default_value <span class="m">10</span> &lt; input.geojson
</pre></div>
</div>
<p>It is also possible to rasterize using a template raster, which will be used
to determine the transform, dimensions, and coordinate reference system of the
output raster:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio rasterize test.tif --like tests/data/shade.tif &lt; input.geojson
</pre></div>
</div>
<p>GeoJSON features may be provided using stdin or specified directly as first
argument, and dimensions may be provided in place of pixel resolution:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio rasterize input.geojson test.tif --dimensions <span class="m">1024</span> <span class="m">1024</span>
</pre></div>
</div>
<p>Other options are available, see:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio rasterize --help
</pre></div>
</div>
</div>
<div class="section" id="rm">
<h2>rm<a class="headerlink" href="cli.html#rm" title="Permalink to this headline">¶</a></h2>
<p>New in 1.0</p>
<p>Invoking the shell’s <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">rm</span> <span class="pre">&lt;path&gt;</span></code> on a dataset can be used to
delete a dataset referenced by a file path, but it won’t handle
deleting side car files.  This command is aware of datasets and
their sidecar files.</p>
</div>
<div class="section" id="sample">
<h2>sample<a class="headerlink" href="cli.html#sample" title="Permalink to this headline">¶</a></h2>
<p>New in 0.18.</p>
<p>The sample command reads <code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">y</span></code> positions from stdin and writes the dataset
values at that position to stdout.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cat <span class="s">&lt;&lt; EOF | rio sample tests/data/RGB.byte.tif</span>
<span class="gp">&gt;</span><span class="s"> [220649.99999832606, 2719199.999999095]</span>
<span class="gp">&gt;</span><span class="s"> EOF</span>
<span class="go">[18, 25, 14]</span>
</pre></div>
</div>
<p>The output of the transform command (see below) makes good input for sample.</p>
</div>
<div class="section" id="shapes">
<h2>shapes<a class="headerlink" href="cli.html#shapes" title="Permalink to this headline">¶</a></h2>
<p>New in 0.11.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">shapes</span></code> command extracts and writes features of a specified dataset band
out as GeoJSON.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio shapes tests/data/shade.tif --bidx <span class="m">1</span> --precision <span class="m">6</span> &gt; shade.geojson
</pre></div>
</div>
<p>The resulting file, uploaded to Mapbox, looks like this: <a class="reference external" href="https://a.tiles.mapbox.com/v4/sgillies.j1ho338j/page.html?access_token=pk.eyJ1Ijoic2dpbGxpZXMiLCJhIjoiWUE2VlZVcyJ9.OITHkb1GHNh9nvzIfUc9QQ#13/39.6079/-106.4822">sgillies.j1ho338j</a>.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">--mask</span></code> option you can write out the shapes of a dataset’s valid
data region.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio shapes --mask --precision <span class="m">6</span> tests/data/RGB.byte.tif <span class="p">|</span> geojsonio
</pre></div>
</div>
<p>See <a class="reference external" href="http://bl.ocks.org/anonymous/raw/ef244954b719dba97926/">http://bl.ocks.org/anonymous/raw/ef244954b719dba97926/</a>.</p>
</div>
<div class="section" id="stack">
<h2>stack<a class="headerlink" href="cli.html#stack" title="Permalink to this headline">¶</a></h2>
<p>New in 0.15.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">stack</span></code> command stacks a number of bands from one or more input files
into a multiband dataset. Input datasets must be of a kind: same data type,
dimensions, etc. The output is cloned from the first input. By default,
<code class="docutils literal notranslate"><span class="pre">stack</span></code> will take all bands from each input and write them in same order to
the output. Optionally, bands for each input may be specified using the
following syntax:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--bidx</span> <span class="pre">N</span></code> takes the Nth band from the input (first band is 1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--bidx</span> <span class="pre">M,N,O</span></code> takes bands M, N, and O.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--bidx</span> <span class="pre">M..O</span></code> takes bands M-O, inclusive.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--bidx</span> <span class="pre">..N</span></code> takes all bands up to and including N.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--bidx</span> <span class="pre">N..</span></code> takes all bands from N to the end.</p></li>
</ul>
<p>Examples using the Rasterio testing dataset that produce a copy of it.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio stack RGB.byte.tif stacked.tif
<span class="gp">$</span> rio stack RGB.byte.tif --bidx <span class="m">1</span>,2,3 stacked.tif
<span class="gp">$</span> rio stack RGB.byte.tif --bidx <span class="m">1</span>..3 stacked.tif
<span class="gp">$</span> rio stack RGB.byte.tif --bidx ..2 RGB.byte.tif --bidx <span class="m">3</span>.. stacked.tif
</pre></div>
</div>
<p>You can use <cite>–rgb</cite> as shorthand for <cite>–co photometric=rgb</cite>.</p>
</div>
<div class="section" id="transform">
<h2>transform<a class="headerlink" href="cli.html#transform" title="Permalink to this headline">¶</a></h2>
<p>New in 0.10.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transform</span></code> command reads a JSON array of coordinates, interleaved, and
writes another array of transformed coordinates to stdout.</p>
<p>To transform a longitude, latitude point (EPSG:4326 is the default) to
another coordinate system with 2 decimal places of output precision, do the
following.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;[-78.0, 23.0]&quot;</span> <span class="p">|</span> rio transform - --dst-crs EPSG:32618 --precision <span class="m">2</span>
<span class="go">[192457.13, 2546667.68]</span>
</pre></div>
</div>
<p>To transform a longitude, latitude bounding box to the coordinate system of
a raster dataset, do the following.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;[-78.0, 23.0, -76.0, 25.0]&quot;</span> <span class="p">|</span> rio transform - --dst-crs tests/data/RGB.byte.tif --precision <span class="m">2</span>
<span class="go">[192457.13, 2546667.68, 399086.97, 2765319.94]</span>
</pre></div>
</div>
</div>
<div class="section" id="warp">
<span id="id2"></span><h2>warp<a class="headerlink" href="cli.html#warp" title="Permalink to this headline">¶</a></h2>
<p>New in 0.25</p>
<p>The <code class="docutils literal notranslate"><span class="pre">warp</span></code> command warps (reprojects) a raster based on parameters that can be
obtained from a template raster, or input directly.  The output is always
overwritten.</p>
<p>To copy coordinate reference system, transform, and dimensions from a template
raster, do the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio warp input.tif output.tif --like template.tif
</pre></div>
</div>
<p>You can specify an output coordinate system using a PROJ.4 or EPSG:nnnn string,
or a JSON text-encoded PROJ.4 object:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio warp input.tif output.tif --dst-crs EPSG:4326

<span class="gp">$</span> rio warp input.tif output.tif --dst-crs <span class="s1">&#39;+proj=longlat +ellps=WGS84 +datum=WGS84&#39;</span>
</pre></div>
</div>
<p>You can also specify dimensions, which will automatically calculate appropriate
resolution based on the relationship between the bounds in the target crs and
these dimensions:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio warp input.tif output.tif --dst-crs EPSG:4326 --dimensions <span class="m">100</span> <span class="m">200</span>
</pre></div>
</div>
<p>Or provide output bounds (in source crs) and resolution:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio warp input.tif output.tif --dst-crs EPSG:4326 --bounds -78 <span class="m">22</span> -76 <span class="m">24</span> --res <span class="m">0</span>.1
</pre></div>
</div>
<p>Previous command in case of south-up image, <code class="docutils literal notranslate"><span class="pre">--</span></code> escapes the next <code class="docutils literal notranslate"><span class="pre">-</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio warp input.tif output.tif --dst-crs EPSG:4326 --bounds -78 <span class="m">22</span> -76 <span class="m">24</span> --res <span class="m">0</span>.1 -- -0.1
</pre></div>
</div>
<p>Other options are available, see:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rio warp --help
</pre></div>
</div>
</div>
<div class="section" id="rio-plugins">
<h2>Rio Plugins<a class="headerlink" href="cli.html#rio-plugins" title="Permalink to this headline">¶</a></h2>
<p>Rio uses <code class="docutils literal notranslate"><span class="pre">click-plugins</span></code> to provide the ability to create additional
subcommands using plugins developed outside rasterio.  This is ideal for
commands that require additional dependencies beyond those used by rasterio, or
that provide functionality beyond the intended scope of rasterio.</p>
<p>For example, <a class="reference external" href="https://github.com/mapbox/rio-mbtiles">rio-mbtiles</a> provides
a command <code class="docutils literal notranslate"><span class="pre">rio</span> <span class="pre">mbtiles</span></code> to export a raster to an MBTiles file.</p>
<p>See <a class="reference external" href="https://github.com/click-contrib/click-plugins">click-plugins</a> for more
information on how to build these plugins in general.</p>
<p>To use these plugins with rio, add the commands to the
<code class="docutils literal notranslate"><span class="pre">rasterio.rio_plugins</span></code> entry point in your <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file, as described
<a class="reference external" href="https://github.com/click-contrib/click-plugins#developing-plugins">here</a>
and in <code class="docutils literal notranslate"><span class="pre">rasterio/rio/main.py</span></code>.</p>
<p>See the
<a class="reference external" href="https://github.com/mapbox/rasterio/wiki/Rio-plugin-registry">plugin registry</a>
for a list of available plugins.</p>
</div>
<div class="section" id="other-commands">
<h2>Other commands?<a class="headerlink" href="cli.html#other-commands" title="Permalink to this headline">¶</a></h2>
<p>Suggestions for other commands are welcome!</p>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="cli.html#id1">1</a></span></dt>
<dd><p>In some Linux distributions “rio” may instead refer to the command line
Diamond Rio MP3 player controller. This conflict can be avoided by
installing Rasterio in an isolated Python environment.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="topics/index.html" class="btn btn-neutral float-right" title="Advanced Topics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Python Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Mapbox
      
        <span class="commit">
          Revision <code>3ae51c8e</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="index.html">latest</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/en/stable/">stable</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/htmlzip/">html</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/epub/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="https://readthedocs.org/projects/rasterio/?fromdocs=rasterio">Project Home</a>
          </dd>
          <dd>
            <a href="https://readthedocs.org/builds/rasterio/?fromdocs=rasterio">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>
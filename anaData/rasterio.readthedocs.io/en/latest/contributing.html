

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contributing &mdash; rasterio  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Frequently Asked Questions" href="faq.html" />
    <link rel="prev" title="rasterio.windows module" href="api/rasterio.windows.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="contributing.html" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "build_date": "2020-07-08T18:00:58Z", "builder": "sphinx", "canonical_url": "https://rasterio.readthedocs.io/en/latest/", "commit": "3ae51c8e", "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "contributing", "programming_language": "py", "project": "rasterio", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_rtd_theme", "user_analytics_code": "", "version": "latest"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js" async="async"></script>
<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> rasterio
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Python Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">Python API Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="contributing.html#">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#code-of-conduct">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#rights">Rights</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#issue-conventions">Issue Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#design-principles">Design Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#dataset-objects">Dataset Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#git-conventions">Git Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#code-conventions">Code Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#development-environment">Development Environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#initial-setup">Initial Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#installing-gdal">Installing GDAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#python-build-requirements">Python build requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#installing-rasterio">Installing Rasterio</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#running-the-tests">Running the tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#additional-information">Additional Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">rasterio</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Contributing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/mapbox/rasterio/blob/master/docs/contributing.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contributing">
<h1>Contributing<a class="headerlink" href="contributing.html#contributing" title="Permalink to this headline">¶</a></h1>
<p>Welcome to the Rasterio project. Here’s how we work.</p>
<div class="section" id="code-of-conduct">
<h2>Code of Conduct<a class="headerlink" href="contributing.html#code-of-conduct" title="Permalink to this headline">¶</a></h2>
<p>First of all: the Rasterio project has a code of conduct. Please read the
CODE_OF_CONDUCT.txt file, it’s important to all of us.</p>
</div>
<div class="section" id="rights">
<h2>Rights<a class="headerlink" href="contributing.html#rights" title="Permalink to this headline">¶</a></h2>
<p>The BSD license (see LICENSE.txt) applies to all contributions.</p>
</div>
<div class="section" id="issue-conventions">
<h2>Issue Conventions<a class="headerlink" href="contributing.html#issue-conventions" title="Permalink to this headline">¶</a></h2>
<p>The Rasterio issue tracker is for actionable issues.</p>
<p>Questions about installation, distribution, and usage should be taken to
the project’s <a class="reference external" href="https://rasterio.groups.io/g/main">general discussion group</a>. Opened issues which fall into one
of these three categories may be perfunctorily closed.</p>
<p>Questions about development of Rasterio, brainstorming, requests for comment,
and not-yet-actionable proposals are welcome in the project’s
<a class="reference external" href="https://rasterio.groups.io/g/dev">developers discussion group</a>. Issues
opened in Rasterio’s GitHub repo which haven’t been socialized there may be
perfunctorily closed.</p>
<p>Rasterio is a relatively new project and highly active. We have bugs, both
known and unknown.</p>
<p>Please search existing issues, open and closed, before creating a new one.</p>
<p>Rasterio employs C extension modules, so bug reports very often hinge on the
following details:</p>
<ul class="simple">
<li><p>Operating system type and version (Windows? Ubuntu 12.04? 14.04?)</p></li>
<li><p>The version and source of Rasterio (PyPI, Anaconda, or somewhere else?)</p></li>
<li><p>The version and source of GDAL (UbuntuGIS? Homebrew?)</p></li>
</ul>
<p>Please provide these details as well as tracebacks and relevant logs.  When
using the <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">rio</span></code> CLI logging can be enabled with <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">rio</span> <span class="pre">-v</span></code> and verbosity
can be increased with <code class="docutils literal notranslate"><span class="pre">-vvv</span></code>.  Short scripts and datasets demonstrating the
issue are especially helpful!</p>
</div>
<div class="section" id="design-principles">
<h2>Design Principles<a class="headerlink" href="contributing.html#design-principles" title="Permalink to this headline">¶</a></h2>
<p>Rasterio’s API is different from GDAL’s API and this is intentional.</p>
<ul class="simple">
<li><p>Rasterio is a library for reading and writing raster datasets. Rasterio uses
GDAL but is not a “Python binding for GDAL.”</p></li>
<li><p>Rasterio always prefers Python’s built-in protocols and types or Numpy
protocols and types over concepts from GDAL’s data model.</p></li>
<li><p>Rasterio keeps I/O separate from other operations. <code class="docutils literal notranslate"><span class="pre">rasterio.open()</span></code> is
the only library function that operates on filenames and URIs.
<code class="docutils literal notranslate"><span class="pre">dataset.read()</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset.write()</span></code>, and their mask counterparts are
the methods that perform I/O.</p></li>
<li><p>Rasterio methods and functions should be free of side-effects and hidden
inputs. This is challenging in practice because GDAL embraces global
variables.</p></li>
</ul>
</div>
<div class="section" id="dataset-objects">
<h2>Dataset Objects<a class="headerlink" href="contributing.html#dataset-objects" title="Permalink to this headline">¶</a></h2>
<p>Our term for the kind of object that allows read and write access to raster data
is <em>dataset object</em>. A dataset object might be an instance of <cite>DatasetReader</cite>
or <cite>DatasetWriter</cite>. The canonical way to create a dataset object is by using the
<cite>rasterio.open()</cite> function.</p>
<p>This is analogous to Python’s use of
<a class="reference external" href="https://docs.python.org/3/glossary.html#term-file-object">file object</a>.</p>
</div>
<div class="section" id="git-conventions">
<h2>Git Conventions<a class="headerlink" href="contributing.html#git-conventions" title="Permalink to this headline">¶</a></h2>
<p>We use a variant of centralized workflow described in the <a class="reference external" href="https://git-scm.com/book/en/v2/Distributed-Git-Distributed-Workflows">Git Book</a>.  We
have no 1.0 release for Rasterio yet and we are tagging and releasing from the
master branch. Our post-1.0 workflow is to be decided.</p>
<p>Work on features in a new branch of the mapbox/rasterio repo or in a branch on
a fork. Create a <a class="reference external" href="https://help.github.com/articles/using-pull-requests/">GitHub pull request</a> when the changes are
ready for review.  We recommend creating a pull request as early as possible
to give other developers a heads up and to provide an opportunity for valuable
early feedback.</p>
</div>
<div class="section" id="code-conventions">
<h2>Code Conventions<a class="headerlink" href="contributing.html#code-conventions" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">rasterio</span></code> namespace contains both Python and C extension modules. All
C extension modules are written using <a class="reference external" href="http://cython.org/">Cython</a>. The
Cython language is a superset of Python. Cython files end with <code class="docutils literal notranslate"><span class="pre">.pyx</span></code> and
<code class="docutils literal notranslate"><span class="pre">.pxd</span></code> and are where we keep all the code that calls GDAL’s C functions.</p>
<p>Rasterio supports Python 2 and Python 3 in the same code base, which is
aided by an internal compatibility module named <code class="docutils literal notranslate"><span class="pre">compat.py</span></code>. It functions
similarly to the more widely known <a class="reference external" href="https://pythonhosted.org/six/">six</a> but
we only use a small portion of the features so it eliminates a dependency.</p>
<p>We strongly prefer code adhering to <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP8</a>.</p>
<p>Tests are mandatory for new features. We use <a class="reference external" href="https://pytest.org">pytest</a>.</p>
<p>We aspire to 100% coverage for Python modules but coverage of the Cython code is
a future aspiration (<a class="reference external" href="https://github.com/mapbox/rasterio/issues/515">#515</a>).</p>
</div>
<div class="section" id="development-environment">
<h2>Development Environment<a class="headerlink" href="contributing.html#development-environment" title="Permalink to this headline">¶</a></h2>
<p>Developing Rasterio requires Python 2.7 or any final release after and
including 3.4.  We prefer developing with the most recent version of Python
but recognize this is not possible for all contributors.  A C compiler is also
required to leverage <a class="reference external" href="https://docs.python.org/3.5/extending/extending.html">existing protocols</a> for extending Python
with C or C++.  See the Windows install instructions in the <a class="reference external" href="https://rasterio.readthedocs.io/en/latest/README.rst">readme</a> for more information about building on Windows.</p>
<div class="section" id="initial-setup">
<h3>Initial Setup<a class="headerlink" href="contributing.html#initial-setup" title="Permalink to this headline">¶</a></h3>
<p>First, clone Rasterio’s <code class="docutils literal notranslate"><span class="pre">git</span></code> repo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> git clone https://github.com/mapbox/rasterio
</pre></div>
</div>
<p>Development should occur within a <a class="reference external" href="http://docs.python-guide.org/en/latest/dev/virtualenvs/">virtual environment</a> to better isolate
development work from custom environments.</p>
<p>In some cases installing a library with an accompanying executable inside a
virtual environment causes the shell to initially look outside the environment
for the executable.  If this occurs try deactivating and reactivating the
environment.</p>
</div>
<div class="section" id="installing-gdal">
<h3>Installing GDAL<a class="headerlink" href="contributing.html#installing-gdal" title="Permalink to this headline">¶</a></h3>
<p>The GDAL library and its headers are required to build Rasterio. We do not
have currently have guidance for any platforms other than Linux and OS X.</p>
<p>On Linux, GDAL and its headers should be available through your distro’s
package manager. For Ubuntu the commands are:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo add-apt-repository ppa:ubuntugis/ppa
<span class="gp">$</span> sudo apt-get update
<span class="gp">$</span> sudo apt-get install gdal-bin libgdal-dev
</pre></div>
</div>
<p>On OS X, Homebrew is a reliable way to get GDAL.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> brew install gdal
</pre></div>
</div>
</div>
<div class="section" id="python-build-requirements">
<h3>Python build requirements<a class="headerlink" href="contributing.html#python-build-requirements" title="Permalink to this headline">¶</a></h3>
<p>Provision a virtualenv with Rasterio’s build requirements.  Rasterio’s
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> script will not run unless Cython and Numpy are installed, so do
this first from the Rasterio repo directory.</p>
<p>Linux users may need to install some additional Numpy dependencies:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt-get install libatlas-dev libatlas-base-dev gfortran
</pre></div>
</div>
<p>then:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -U pip
<span class="gp">$</span> pip install -r requirements-dev.txt
</pre></div>
</div>
</div>
<div class="section" id="installing-rasterio">
<h3>Installing Rasterio<a class="headerlink" href="contributing.html#installing-rasterio" title="Permalink to this headline">¶</a></h3>
<p>Rasterio, its Cython extensions, normal dependencies, and dev dependencies can
be installed with <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pip</span></code>.  Installing Rasterio in editable mode while
developing is very convenient but only affects the Python files.  Specifying the
<code class="docutils literal notranslate"><span class="pre">[test]</span></code> extra in the command below tells <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pip</span></code> to also install
Rasterio’s dev dependencies.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -e .<span class="o">[</span>test<span class="o">]</span>
</pre></div>
</div>
<p>Any time a Cython (<code class="docutils literal notranslate"><span class="pre">.pyx</span></code> or <code class="docutils literal notranslate"><span class="pre">.pxd</span></code>) file is edited the extension modules
need to be recompiled, which is most easily achieved with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -e .
</pre></div>
</div>
<p>When switching between Python versions the extension modules must be recompiled,
which can be forced with <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">touch</span> <span class="pre">rasterio/*.pyx</span></code> and then re-installing with
the command above.  If this is not done an error claiming that an object <code class="docutils literal notranslate"><span class="pre">has</span>
<span class="pre">the</span> <span class="pre">wrong</span> <span class="pre">size,</span> <span class="pre">try</span> <span class="pre">recompiling</span></code> is raised.</p>
<p>The dependencies required to build the docs can be installed with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -e .<span class="o">[</span>docs<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="running-the-tests">
<h3>Running the tests<a class="headerlink" href="contributing.html#running-the-tests" title="Permalink to this headline">¶</a></h3>
<p>Rasterio’s tests live in <code class="docutils literal notranslate"><span class="pre">tests</span> <span class="pre">&lt;tests/&gt;</span></code> and generally match the main
package layout.</p>
<p>To run the entire suite and the code coverage report:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> py.test --cov rasterio --cov-report term-missing
</pre></div>
</div>
<p>A single test file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> py.test tests/test_band.py
</pre></div>
</div>
<p>A single test:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> py.test tests/test_band.py::test_band
</pre></div>
</div>
</div>
</div>
<div class="section" id="additional-information">
<h2>Additional Information<a class="headerlink" href="contributing.html#additional-information" title="Permalink to this headline">¶</a></h2>
<p>More technical information lives on the wiki.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/mapbox/rasterio/wiki/Development-Guide">https://github.com/mapbox/rasterio/wiki/Development-Guide</a></p></li>
<li><p><a class="reference external" href="https://github.com/mapbox/rasterio/wiki/Exposing-GDAL-Functionality">https://github.com/mapbox/rasterio/wiki/Exposing-GDAL-Functionality</a></p></li>
<li><p><a class="reference external" href="https://github.com/mapbox/rasterio/wiki/Cython-and-GDAL">https://github.com/mapbox/rasterio/wiki/Cython-and-GDAL</a></p></li>
</ul>
<p>The long term goal is to consolidate into this document.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faq.html" class="btn btn-neutral float-right" title="Frequently Asked Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api/rasterio.windows.html" class="btn btn-neutral float-left" title="rasterio.windows module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Mapbox
      
        <span class="commit">
          Revision <code>3ae51c8e</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="index.html">latest</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/en/stable/">stable</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/htmlzip/">html</a></dd>
        
          <dd><a href="https://rasterio.readthedocs.io/_/downloads/en/latest/epub/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="https://readthedocs.org/projects/rasterio/?fromdocs=rasterio">Project Home</a>
          </dd>
          <dd>
            <a href="https://readthedocs.org/builds/rasterio/?fromdocs=rasterio">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>